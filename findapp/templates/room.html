{% extends 'base.html' %}

{% load static %}

{% block title %}FindWord{% endblock %}

{% block content %}
    {{ room_name|json_script:"room-name" }}

    <div class="infos-group">
        <div class="player-container">
            {% if player1 %}
            <p class="player_name" id="player1">{{player1}}</p>
            {% else %}
            <p class="player_name" id="player1"></p>
            {% endif %}

            {% if note and not in_game_state%}
            <div class="thought">
                <textarea class="player_text" id="player1_text" readonly style="resize: none;">{{player1_text}}</textarea>
            </div>
            {% endif %}
        </div>

        <div class="ingame-infos-group">
            <div class="note">
                {% if note %}
                    {% if note == 1 %}
                    <image src="{% static 'findapp/images/crying_emoji.png' %}" class="note-image">
                    {% elif note == 2 %}
                    <image src="{% static 'findapp/images/sniffa_emoji.png' %}" class="note-image">
                    {% elif note == 3 %}
                    <image src="{% static 'findapp/images/neutral_emoji.png' %}" class="note-image">
                    {% elif note == 4 %}
                    <image src="{% static 'findapp/images/yum_emoji.png' %}" class="note-image">
                    {% elif note == 5 %}
                    <image src="{% static 'findapp/images/happy_emoji.png' %}" class="note-image">
                    {% endif %}
                {% else %}
                    <image src="{% static 'findapp/images/dodo_emoji.png' %}" class="note-image">
                {% endif %}
            </div>

            <div class="score-container">
                {% if score%}
                    {% if in_game_state and score != -1%}
                        <p class="score">+ {{ score }} points !</p>
                    {% else %}
                        <p class="score"></p>
                    {% endif %}
                {% endif %}
            </div>

            <div class="word">
                {% if word %}
                <p >{{ word }}</p>
                {% endif %}
            </div>
        </div>

        <div class="player-container">
            {% if player2 %}
            <p class="player_name" id="player2">{{player2}}</p>
            {% else %}
            <p class="player_name" id="player2"></p>
            {% endif %}

            {% if note and not in_game_state%}
            <div class="thought">
                <textarea class="player_text" id="player2_text" readonly style="resize: none;">{{player2_text}}</textarea>
            </div>
            {% endif %}
        </div>
    </div>

    <div class="interaction-group">
        <form action="" name="action" method="post" id="find-word-form">
            {% csrf_token %}
            {% if not in_game_state%}
                <div class="text-container">
                    <input type="hidden" name="action" value="FINDWORD">
                    <textarea class="text-input" name="input-text" disabled></textarea>
                </div>

                <div class="rating-container">
                    {% if note and player1_text and player2_text%}
                        <input type="range" name="rating-input" min="1" max="5" value="{{player_note}}" class="rating-slider" id="rating-slider" oninput="showTooltipImage(this)">
                        <div id="tooltip-image-container" style="position: relative;">
                            <img id="tooltip-image" src="" alt="Tooltip Image">
                        </div>
                    {% else %}
                        <input type="range" name="rating-input" min="1" max="5" value="3" class="rating-slider" id="rating-slider" disabled>
                    {% endif %}
                </div>
            {% else %}
                <div class="text-container">
                    <input type="hidden" name="action" value="RESULTS">
                    <textarea class="text-input" maxlength="100" name="input-text" onkeydown="return event.key != 'Enter';" oninput="filterInput(this)"></textarea>
                </div>

                <div class="rating-container">
                    <input type="range" name="rating-input" min="1" max="5" value="3" class="rating-slider" id="rating-slider" disabled>
                </div>
            {% endif %}
        </form>

        <div class="ready-container">
            {% if not player_ready %}
                <a href="" id="ready-button" class="btn btn-red btn-animate" >pas prêt</a>
            {% else %}
                <a href="" id="ready-button" class="btn btn-green btn-animate" >prêt</a>
            {% endif %}
        </div>
    </div>

    <script src="{% static 'findapp/scripts/room.js' %}"></script>
{% endblock %}